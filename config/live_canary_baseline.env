# Live canary baseline profile for first deployment stages.
# Copy selected lines into your runtime `.env` or container environment.

# Hard safety latches
LIVE_ORDER_POSTING_ENABLED=false
LIVE_TRADING_ENABLED=false
ENABLE_XRP_STRATEGIES=false
ENABLE_ONE_MINUTE_STRATEGIES=false
MODEL_PROBABILITY_GATE_ENFORCE_LIVE=true
MODEL_PROBABILITY_GATE_REQUIRE_MODEL=true
INTELLIGENCE_GATE_ENABLED=true
INTELLIGENCE_GATE_MAX_STALENESS_MS=2500
INTELLIGENCE_GATE_REQUIRE_PEER_CONFIRMATION=true
INTELLIGENCE_GATE_STRONG_MARGIN=0.015
SCANNER_HEARTBEAT_MAX_AGE_MS=60000
LEDGER_PNL_PARITY_ENABLED=true
LEDGER_PNL_PARITY_INTERVAL_MS=30000
LEDGER_PNL_PARITY_WARN_ABS_USD=2
LEDGER_PNL_PARITY_CRITICAL_ABS_USD=10
LEDGER_PNL_PARITY_MIN_PAPER_ROWS=5

# Global sizing posture (conservative)
STRATEGY_WEIGHT_CAP=1.30
STRATEGY_ALLOCATOR_MIN_SAMPLES=30
STRATEGY_ALLOCATOR_TARGET_SHARPE=0.55

# Meta allocator overlay (portfolio-level)
META_ALLOCATOR_ENABLED=true
META_CONTROLLER_ADVISORY_ONLY=false
META_ALLOCATOR_META_BLEND=0.50
META_ALLOCATOR_MIN_OVERLAY=0.70
META_ALLOCATOR_MAX_OVERLAY=1.15
META_ALLOCATOR_FAMILY_CONCENTRATION_SOFT_CAP=0.42
META_ALLOCATOR_COST_DRAG_PENALTY_BPS=20

# Cross-horizon risk overlay (keep tame initially)
CROSS_HORIZON_ROUTER_ENABLED=true
CROSS_HORIZON_ROUTER_CONFIRM_MULT=1.08
CROSS_HORIZON_ROUTER_CONFLICT_MULT=0.72
CROSS_HORIZON_ROUTER_MAX_BOOST=1.15

# ML training cadence for canary (require statistically meaningful activation)
MODEL_TRAINER_ENABLED=true
MODEL_TRAINER_INTERVAL_MS=60000
MODEL_TRAINER_MIN_LABELED_ROWS=20
MODEL_TRAINER_MIN_NEW_LABELS=2
MODEL_TRAINER_SPLITS=3
MODEL_TRAINER_PURGE_ROWS=4
MODEL_TRAINER_EMBARGO_ROWS=4
MODEL_TRAINER_MIN_TRAIN_ROWS_PER_FOLD=10
MODEL_TRAINER_MIN_TEST_ROWS_PER_FOLD=4

# Execution shortfall optimizer (protect thin-edge entries)
EXECUTION_SHORTFALL_OPTIMIZER_ENABLED=true
EXECUTION_SHORTFALL_TARGET_RETAIN_BPS=20
EXECUTION_SHORTFALL_MIN_RETAIN_BPS=3
EXECUTION_SHORTFALL_MAX_SIZE_REDUCTION_PCT=0.60
EXECUTION_SHORTFALL_MIN_SIGNAL_NOTIONAL_USD=15

# Cross-strategy netting guard (cap same-market directional load)
EXECUTION_NETTING_ENABLED=true
EXECUTION_NETTING_TTL_MS=1200000
EXECUTION_NETTING_MARKET_CAP_USD=850
EXECUTION_NETTING_OPPOSING_BLOCK_RATIO=0.90

# Polymarket live-post ceilings
POLY_MAX_ORDER_NOTIONAL_USD=120
POLY_MAX_SIGNAL_NOTIONAL_USD=350
POLY_EXECUTION_MIN_INTERVAL_MS=2500
POLY_LIVE_ORDER_TYPE=FOK

# BTC_5M canary risk controls
BTC_5M_MIN_EXPECTED_NET_RETURN=0.008
BTC_5M_MAX_POSITION_FRACTION=0.10
BTC_5M_MAX_ENTRY_SPREAD=0.05
BTC_5M_MAX_SPOT_AGE_MS=1200
BTC_5M_MAX_BOOK_AGE_MS=900
BTC_5M_LIVE_PREVIEW_COOLDOWN_MS=900
BTC_5M_IV_BLEND_WEIGHT=0.65
BTC_5M_IV_MAX_STALE_MS=90000
BTC_5M_DIVERGENCE_MIN_FLOOR=0.03
BTC_5M_DIVERGENCE_SPREAD_MULT=0.40
BTC_5M_DIVERGENCE_VOL_MULT=0.30
BTC_5M_DIVERGENCE_UNCERTAINTY_BPS=12
DERIBIT_IV_REFRESH_MS=10000
DERIBIT_IV_HTTP_TIMEOUT_MS=4000
DERIBIT_IV_MAX_SPOT_AGE_MS=15000
DERIBIT_IV_MIN_SAMPLES=4

# Optional phased allowlist (when LIVE_ORDER_POSTING_ENABLED=true)
POLY_LIVE_STRATEGY_ALLOWLIST=BTC_5M,BTC_15M,ETH_5M,ETH_15M,SOL_5M,SOL_15M,ATOMIC_ARB,GRAPH_ARB

# Soak report thresholds
SOAK_MIN_PREFLIGHT_SAMPLES=20
SOAK_MIN_PREFLIGHT_PASS_RATE_PCT=96
SOAK_MAX_SHORTFALL_BLOCK_RATE_PCT=18
SOAK_MAX_NETTING_BLOCK_RATE_PCT=12
SOAK_MIN_EDGE_CAPTURE_RATIO=0.55
SOAK_MIN_NET_PNL_USD=0
SOAK_MAX_REJECT_RATE_PCT=20
SOAK_MAX_STALE_FORCED_CLOSES=0
